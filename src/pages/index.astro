---
import Layout from '../layouts/Layout.astro';
import '@fontsource/great-vibes';
import '@fontsource-variable/montserrat';
---

<Layout>
	<section class="seccion seccion-main" id="main" data-index="0" data-status="active">
		<picture class="top-frame top-frame-left">
			<source srcset="/img/FloresMarcoSuperior_1.png">
			<img src="/img/FloresMarcoSuperior_1.png" alt="Marco superior">
		</picture>
		<picture class="top-frame top-frame-right">
			<source srcset="/img/FloresMarcoSuperior_1.png">
			<img src="/img/FloresMarcoSuperior_1.png" alt="Marco superior">
		</picture>
		<span class="sub-titulo-portada">¡Nos casaremooos!</span>
		<picture class="main-content main-photo">
			<source srcset="/img/imagen_portada_high_1.jpeg">
			<img src="/img/imagen_portada_high_1.jpeg" alt="Foto de los novios">
		</picture>
		<picture class="main-content golden-frame">
			<source srcset="/img/MarcoDorado_1.png">
			<img src="/img/MarcoDorado_1.png" alt="Marco superior">
		</picture>
		<picture class="golden-frame-decoration">
			<source srcset="/img/FloresDecoracionMarco_1.png">
			<img src="/img/FloresDecoracionMarco_1.png" alt="Marco superior">
		</picture>
		<div class="our-names">
			<span>Daniel & Ayde</span>
		</div>
		<span class="texto-portada">
			"Comprendí que el amor encierra todas las vocaciones, que el amor lo es todo, que abarca todos los tiempos y todos los lugares, en una palabra: es eterno."
		</span>
		<span class="autor-cita">
			Santa Teresita del Niño Jesús
		</span>
		<span class="fecha">ENE | 19 | 2024</span>
		<picture class="bottom-frame bottom-frame-left">
			<source srcset="/img/FloresMarcoInferior_1.png">
			<img src="/img/FloresMarcoInferior_1.png" alt="Marco superior">
		</picture>
		<picture class="bottom-frame bottom-frame-right">
			<source srcset="/img/FloresMarcoInferior_1.png">
			<img src="/img/FloresMarcoInferior_1.png" alt="Marco superior">
		</picture>
	</section>
	<section class="seccion seccion-our-story" id="our-story" data-index="1" data-status="unknown">

		<picture class="decoracion-horizontal-superior decoracion-horizontal-size">
			<source srcset="/img/SeparadorHorizontal_1.png">
			<img src="/img/SeparadorHorizontal_1.png" alt="Divisor superior">
		</picture>

		<picture class="decoracion-horizontal-inferior decoracion-horizontal-size">
			<source srcset="/img/SeparadorHorizontal_1.png">
			<img src="/img/SeparadorHorizontal_1.png" alt="Divisor inferior">
		</picture>

		<span class="mensaje">
			Comenzamos una nueva aventura y no sería posible celebrar esta unión sin la compañía de nuestros familiares y amigos. Por eso, queremos que hagas parte de nuestro gran día.
		</span>
		<div class="contador">
			<span class="contador-texto">
				CUENTA ATRÁS 
			</span>
			<div class="contador-reloj">
				<div class="digito">
					<p>0</p>
				</div>
				<div class="digito">
					<p>0</p>
				</div>
				<span class="separacion-digitos">:</span>
				<div class="digito">
					<p>0</p>
				</div>
				<div class="digito">
					<p>0</p>
				</div>
				<span class="separacion-digitos">:</span>
				<div class="digito">
					<p>0</p>
				</div>
				<div class="digito">
					<p>0</p>
				</div>
			</div>
			<div class="contador-nombres">
				<span class="contador-nombre">MESES</span>
				<span class="contador-nombre">DÍAS</span>
				<span class="contador-nombre">HORAS</span>
			</div>
		</div>
		<picture class="decoracion-contador">
			<source srcset="/img/DecoracionTemporizador_1.png">
			<img src="/img/DecoracionTemporizador_1.png" alt="Decoración Contador">
		</picture>

	</section>
	<section class="seccion seccion-info" id="info" data-index="2" data-status="unknown">
		<picture class="decoracion-info-superior decoracion-info-size">
			<source srcset="/img/DecoFlorarlLarga.png">
			<img src="/img/DecoFlorarlLarga.png" alt="Decoracion Flores">
		</picture>
		<picture class="decoracion-info-inferior decoracion-info-size">
			<source srcset="/img/DecoFlorarlLarga.png">
			<img src="/img/DecoFlorarlLarga.png" alt="Decoracion Flores">
		</picture>

		<picture class="copas">
			<source srcset="/img/Copas.png">
			<img src="/img/Copas.png" alt="Copas">
		</picture>
		<picture class="Iglesia">
			<source srcset="/img/Iglesia.png">
			<img src="/img/Iglesia.png" alt="Iglesia">
		</picture>

		<div class="detalles-info detalles-ceremonia">
			<h3>CEREMONIA</h3>
			<p>Parroquia San José de Torices</p>
			<p>Torices Cr 16 # 44-10</p>
			<span>5:00 P.M</span>
		</div>
		<div class="detalles-info detalles-recepcion">
			<h3>RECEPCIÓN</h3>
			<p>Club Naval de Suboficiales</p>
			<p>Crespo Cll. 71</p>
			<span>8:00 P.M</span>
		</div>
		<a href="https://www.google.com/maps/place/Parroquia+San+Jos%C3%A9+De+Torices/@10.4305892,-75.5342436,15z/data=!4m6!3m5!1s0x8ef62f85c4c655db:0x7a346b2519cb1b3f!8m2!3d10.4305892!4d-75.5342436!16s%2Fg%2F11ggs2yn4s?entry=ttu" 
			target="_blank">
			<picture class="mapa mapa-parroquia">
				<source srcset="/img/MapaParroquia.png">
				<img src="/img/MapaParroquia.png" alt="Mapa Parroquia">
			</picture>
		</a>
		<a href="https://www.google.com/maps/place/Club+Naval+de+Suboficiales/@10.4521671,-75.5170632,17z/data=!3m1!4b1!4m6!3m5!1s0x8ef62545650955c1:0xf82cfbd931505b17!8m2!3d10.4521618!4d-75.5144883!16s%2Fg%2F1tykwfx2?entry=ttu" 
			target="_blank">
			<picture class="mapa mapa-club">
				<source srcset="/img/MapaClub.png">
				<img src="/img/MapaClub.png" alt="Mapa Club">
			</picture>
		</a>
		<a href="https://www.google.com/maps/place/Parroquia+San+Jos%C3%A9+De+Torices/@10.4305892,-75.5342436,15z/data=!4m6!3m5!1s0x8ef62f85c4c655db:0x7a346b2519cb1b3f!8m2!3d10.4305892!4d-75.5342436!16s%2Fg%2F11ggs2yn4s?entry=ttu" 
			target="_blank" class="link-maps link-ceremonia">Ver en Google Maps</a>
		<a href="https://www.google.com/maps/place/Club+Naval+de+Suboficiales/@10.4521671,-75.5170632,17z/data=!3m1!4b1!4m6!3m5!1s0x8ef62545650955c1:0xf82cfbd931505b17!8m2!3d10.4521618!4d-75.5144883!16s%2Fg%2F1tykwfx2?entry=ttu" 
			target="_blank" class="link-maps link-recepcion">Ver en Google Maps</a>
	</section>
	<section class="seccion seccion-dresscode" id="info" data-index="3" data-status="unknown">
		<div class="deco1">
			<picture class="deco1-flores">
				<source srcset="/img/SeparadorHorizontal_1.png">
				<img src="/img/SeparadorHorizontal_1.png" alt="Decoracion Floral">
			</picture>
		</div>
		<div class="titulo-dresscode">
			<h1>
				DRESSCODE
			</h1>
			<h2>
				Formal
			</h2>
		</div>
		<div class="colores">
			<h4>COLORES RESERVADOS</h4>
			<div class="color c1"></div>
			<div class="color c2"></div>
			<div class="color c3"></div>
		</div>
		<div class="mujer">
			<h4 class="titulo-mujer-hombre">MUJERES</h4>
			<picture class="figura">
				<source srcset="/img/DCMujer.png">
				<img src="/img/DCMujer.png" alt="Decoracion Floral">
			</picture>
			<p class="indicacion-desscode">Vestido largo</p>
		</div>
		<div class="hom-muj-separador"></div>
		<div class="hombre">
			<h4 class="titulo-mujer-hombre">HOMBRES</h4>
			<picture class="figura">
				<source srcset="/img/DCHombre.png">
				<img src="/img/DCHombre.png" alt="Decoracion Floral">
			</picture>
			<p class="indicacion-desscode">Traje</p>
		</div>
		<div class="deco2">
			<picture class="deco2-flores">
				<source srcset="/img/SeparadorHorizontal_1.png">
				<img src="/img/SeparadorHorizontal_1.png" alt="Decoracion Floral">
			</picture>
		</div>
	</section>
</Layout>

<style>

	/* -1920×1080 (9.94%)
	-1366×768 (6.22%)
	-360×640 (5.88%)
	414×896 (4.21%)
	1536×864 (3.94%)
	375×667 (3.74%) */

	.seccion {
		width: 100%;
		height: 100vh;
		position: absolute;
	}
	.seccion-main {
		background-image: url(/img/BackgroundImage.png);
		background-repeat: no-repeat;
		background-size: cover;
		top: 0px;
	}
	.seccion-our-story {
		background-image: url(/img/Manos.png);
		background-repeat: no-repeat;
		background-size: cover;
		top: 100vh;
	}
	.seccion-info {
		background-image: url(/img/BackgroundImage.png);
		background-repeat: no-repeat;
		background-size: cover;
		top: 100vh;
	}
	.seccion-dresscode{
		background-image: url(/img/BackgroundImage.png);
		background-repeat: no-repeat;
		background-size: cover;
		top: 100vh;
	}

	.move-up{
		top: -100vh;
		transition: all 1s;
	}
	.move-down{
		top: 100vh;
		transition: all 1s;
	}
	.move-center{
		top: 0px;
		transition: top 1s;
	}
	
	.top-frame {
		position: absolute;
		top: -8vh;
	}
	.top-frame img {
		/* width: 20vw; */
		height: 30vw;
		scale: 1;
		object-fit: cover;
	}
	.top-frame-left {
		left: -6vw;
	}
	.top-frame-right {
		right: -6vw;
		rotate: y 180deg;
	}

	.bottom-frame {
		position: absolute;
		bottom: -18vh;
	}
	.bottom-frame img {
		height: 27vw;
		scale: 1;
		object-fit: cover;
	}
	.bottom-frame-left {
		left: -7vw;
		rotate: -10deg;
	}
	.bottom-frame-right {
		right: -7vw;
		transform: rotateY(180deg) rotate(-10deg);
	}
	
	.main-content {
		position: absolute;
		top: 35vh;
		left: 50vw;
	}

	.golden-frame img {
		height: 22vw;
		scale: 1;
		object-fit: cover;
		translate: -50% -50%;
	}
	
	.golden-frame-decoration{
		position: absolute;
		top: 28vh;
		left: 37vw;
	}
	.golden-frame-decoration img{
		height: 18vw;
		scale: 1;
		object-fit: cover;
		rotate: -15deg;
		/* translate: -50% -50%;		 */
	}

	.main-photo{
	}
	.main-photo img{
		width: 20vw;
		height: 20vw;
		translate: -50% -50%;
		scale: 1;
		float: left;
		object-fit: cover;
		border-radius: 50%;
	}

	.our-names{
		position: absolute;
		top: 62vh;
		left: 36vw;
		width: 100%;
		font-size: 5vw;
		color: var(--accent);
		font-family: 'Great Vibes', sans-serif;;
	}

	.sub-titulo-portada{
		font-family: 'Montserrat Variable', sans-serif;
		color: var(--accent);
		font-size: 30px;
		font-weight: 500;
		position: absolute;
		top: 5vh;
		left: 50vw;
		translate: -50%;
	}

	.texto-portada{
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
		line-height: 3.5vh;
		color: var(--basic);
		font-size: 15px;
		text-align: center;
		width: 43vw;
		position: absolute;
		top: 77vh;
		left: 50vw;
		translate: -50%;
	}

	.autor-cita	{
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
		position: absolute;
		top: 86vh;
		left: 50vw;
		translate: -50%;
		font-size: 15px;
		color: var(--accent);
	}

	.fecha{
		position: absolute;
		top: 92vh;
		left: 50vw;
		translate: -50%;
		gap: 0rem;
		color: var(--accent);
		font-size: 30px;
		font-family: 'Trebuchet MS', sans-serif;
		font-weight: bolder;
	}

	.decoracion-horizontal-size img{
		width: 95vh;
		scale: 1;
		object-fit: cover;
	}

	.decoracion-horizontal-superior{
		position: absolute;
		top: 3vh;
		left: 50vw;
		translate: -50%;
	}

	.decoracion-horizontal-superior img{
		rotate: 180deg;
	}
	
	.decoracion-horizontal-inferior{
		position: absolute;
		top: 45vh;
		left: 50vw;
		translate: -50%;
	}

	.seccion-our-story .mensaje {
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
		color: var(--accent);
		font-size: 4.8vh;
		font-weight: 500;
		text-align: center;
		width: 120vh;
		position: absolute;
		top: 20vh;
		left: 50vw;
		translate: -50%;		
	}

	.contador {
		position: absolute;
		top: 70vh;
		left: 50vw;
		translate: -50%;		
		background-color: var(--basic-light);
		width: 30vw;
		height: 27vh;
		border-radius: 25px;
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
	}

	.contador .contador-texto{
		font-size: 7vh;
		font-weight: bold;
		color: var(--secondary-light);
		text-align: center;
		position: relative;
		top: 2vh;
		width: 100%;
	}

	.contador-reloj {
		position: relative;
		top: 3vh;
		color: var(--secondary-light);
		font-size: 6vh;
		width: 100%;
		display: flex;
		gap: 1vw;
		justify-content: center;
	}

	.contador-reloj .digito {
		display: table;
		background-color: var(--secondary-light);
		color: var(--accent);
		opacity: .69;
		width: 3vw;
		border-radius: 5px;
		text-align: center;
	}

	.digito p {
		display: inline;
		vertical-align: middle;
	}

	.contador-nombres {
		position: relative;
		top: 5vh;
		display: flex;
		justify-content: center;
		gap: 5vw;
		width: 100%;
		color: var(--secondary-light);
		font-size: 3.3vh;
		font-weight: bold;
	}

	.decoracion-contador{
		position: absolute;
		top: 65vh;
		left: 30vw;
	}

	.decoracion-contador img{
		width: 10vw;
		scale: 1;
		object-fit: cover;
		rotate: 130deg;
	}

	.decoracion-info-size img{
		width: 100vw;
		scale: 1;
		object-fit: cover;
	}

	.decoracion-info-superior {
		position: absolute;
		top: -5px;
		rotate: 180deg;
		left: 0vw;
	}
	.decoracion-info-inferior {
		position: absolute;
		bottom: -5px;
		left: 0vw;
	}

	.Iglesia{
		position: absolute;
		top: 20vh;
		left: 32.5vw;
	}
	.Iglesia img{
		width: 5vw;
		scale: 1;
		object-fit: cover;	
	}
	.copas{
		position: absolute;
		top: 18.5vh;
		left: 62vw;
	}
	.copas img{
		width: 6vw;
		scale: 1;
		object-fit: cover;	
	}

	.mapa img{
		width: 20vw;
		scale: 1;
		object-fit: cover;
	}
	.mapa-parroquia{
		position: absolute;
		top: 50vh;
		left: 25vw;
	}
	.mapa-club{
		position: absolute;
		top: 50vh;
		left: 55vw;
	}
	
	.detalles-info {
		position: absolute;
		top: 32vh;
		translate: -50%;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1vh;
		font-size: 2.8vh;
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
	}
	.detalles-info h3{
		margin: 0px;
		color: var(--accent-light);
	}
	.detalles-info p{
		color: var(--accent);
	}
	.detalles-info span{
		color: var(--accent);
		font-weight: bold;
	}
	.detalles-ceremonia	{
		left: 35vw;
	}
	.detalles-recepcion {
		left: 65vw;
	}

	.link-maps {
		position: absolute;
		top: 75vh;
		color: var(--accent);
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
		translate: -50%;
	}
	.link-ceremonia	{
		left: 35vw;
	}
	.link-recepcion {
		left: 65vw;
	}

	.seccion-dresscode{
		display: grid;
		grid-template-areas: 
		"deco1 titulo colores colores deco2"
		"deco1 titulo mujer hombre deco2";
		grid-template-columns: 15vw 25vw 22.5vw 22.5vw 15vw;
		grid-template-rows: 30vh 70vh;
	}

	.deco1 {
		grid-area: deco1;
		border-right: solid 3px var(--accent);
	}
	.deco1 picture{
		position: relative;
		top: 50%;
		right: 0px;
	}
	.deco1 picture img{
		width: 40vw;
		scale: 1;
		object-fit: cover;	
		rotate: 90deg;
		translate: -8.2vw -50%;
	}
	.titulo-dresscode {
		grid-area: titulo;
		border-right: solid 3px var(--accent);
	}
	.titulo-dresscode h1{
		position: relative;
		top: 40vh;
		left: 1.5vw;
		font-size: 3.4vw;
		color: var(--accent-light);
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
	}
	.titulo-dresscode h2{
		position: relative;
		top: 28vh;
		left: 8vw;
		font-size: 5.5vw;
		color: var(--accent);
		font-family: 'Great Vibes', sans-serif;;
	}
	.colores {
		grid-area: colores;
		border-bottom: solid 3px var(--accent);
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		column-gap: 4vw;
	}
	.colores h4{
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
		font-weight: 500;
		color: var(--accent);
		font-size: 2vw;
		width: 100%;
		text-align: center;
		margin-bottom: .5vh;
	}
	.colores .color{
		width: 6vw;
		height: 6vw;
		scale: 1;
		border-radius: 50%;
	}
	.colores .c1{
		background-color: white;
	}
	.colores .c2{
		background-color: var(--accent-light);
	}
	.colores .c3{
		background-color: var(--secondary);
	}
	.mujer {
		grid-area: mujer;
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
	}
	.hombre {
		grid-area: hombre;
		font-family: 'Montserrat Variable', Helvetica, sans-serif;
	}
	.hom-muj-separador{
		position: absolute;
		top: 35vh;
		left: 62.5vw;
		height: 60vh;
		border-left: solid 3px var(--accent);
	}
	.figura{
		position: relative;
		top: 30%;
		left: 50%;
	}
	.figura img{
		translate: -50% -50%;
		height: 35vh;
		object-fit: cover;	
	}
	.titulo-mujer-hombre{
		width: 100%;
		text-align: center;
		position: relative;
		top: 10%;
		font-size: 4vh;
		font-weight: 500;
		color: var(--accent)
	}
	.indicacion-desscode{
		width: 100%;
		text-align: center;
		position: relative;
		top: 8%;
		font-size: 3vh;
		color: var(--accent)		
	}
	.deco2 {
		grid-area: deco2;
		border-left: solid 3px var(--accent);
	}
	.deco2 picture{
		position: relative;
		top: 50vh;
		left: 0px;
	}
	.deco2 picture img{
		width: 40vw;
		scale: 1;
		object-fit: cover;	
		rotate: y 180deg;
		transform: rotate(90deg);
		translate: -16.8vw -50%;
	}
	@media (max-width: 1920px){
		/* .main-photo img{
			height: 100vh;
			width: 55vw;
		} */
		
		/* .our-names{
			top: 45vh;
		} */
		
		/* .sub-titulo-portada{
			top: 61vh;
			font-size: 2vw;
		} */

		/* .texto-portada{
			top: 68vh;
			font-size: 1.5vw;
			width: 45vw;
		} */

	}

	@media (max-width: 1366px){
		
		/* .main-photo img{
			height: 90vh;
			width: 60vw;
		} */

		/* .our-names{
			top: 45vh;
		} */

		/* .sub-titulo-portada{
			top: 60vh;
			font-size: 2.5vw;
		} */
		
		/* .texto-portada{
			font-size: 2vw;
			width: 40vw;
		} */
	}

	@media (max-width: 375px){
		
		.seccion-main {
			background-color: rgba(217,203,194,255);
		}
		
		.main-photo{
			left: 0px;
		}

		.main-photo img{
			height: 60vh;
			width: 100vw;
		}

		.our-names{
			top: 5vh;
			font-size: 12vw;
		}

		.sub-titulo-portada{
			top: 13vh;
			font-size: 15px;
		}
		
		.texto-portada{
			top: 17vh;
			font-size: 12px;
			width: 75vw; 
		}
	}

</style>

<script>
	let touchPositionY: number = 0;
	let touchStartY: number = 0;
	let deltaY: number = 0;

	const debounce = (callback: Function, waitTime: number) => {
		let timerId: ReturnType<typeof setTimeout>;
		let execute = true;
		return () => {
			if(execute) {
				const executed = callback();
				if(executed) {
					execute = false;
				}
			}
			clearTimeout(timerId);
			timerId = setTimeout(() => {
				execute = true
			}, waitTime) 
		}
	}

	const upOrDown = () : boolean => {
		const currentSection: HTMLElement|null = document.querySelector(`[data-status="active"]`);

		if(!currentSection || !currentSection.getAttribute('data-index')) return false;

		if(deltaY < 0) {
			const nextIndex = +(currentSection.getAttribute('data-index') ?? 1) - 1;
			const nextSection: HTMLElement|null = document.querySelector(`[data-index="${nextIndex}"]`);
			if(!nextSection) return false;
			currentSection.dataset.status = "unknown";
			currentSection.classList.remove('move-center');
			currentSection.classList.add('move-down');
			nextSection.dataset.status = "active";
			nextSection.classList.remove('move-up');
			nextSection.classList.add('move-center');

			return true;
		}
		if(deltaY > 0) {
			const nextIndex = +(currentSection.getAttribute('data-index') ?? -1) + 1;
			const nextSection: HTMLElement|null = document.querySelector(`[data-index="${nextIndex}"]`);
			if(!nextSection) return false;
			currentSection.dataset.status = "unknown";
			currentSection.classList.remove('move-center');
			currentSection.classList.add('move-up');
			nextSection.dataset.status = "active";
			nextSection.classList.remove('move-down');
			nextSection.classList.add('move-center');
			return true;

		}
		return false;
	}

	const debounceUpOrDown = debounce(upOrDown, 500);
	
	const onScroll = (e: WheelEvent) => {
		deltaY = e.deltaY;
		debounceUpOrDown()
	}

	document.addEventListener('wheel', onScroll)

	document.addEventListener('touchstart', (e: TouchEvent) => {
		touchStartY	= e.touches[0].clientY;
	})

	document.addEventListener('touchmove', (e: TouchEvent) => {
		touchPositionY = e.touches[0].clientY;
	})

	document.addEventListener('touchend', () => {
		deltaY = touchStartY - touchPositionY;
		debounceUpOrDown();
	})

</script>

